var app=function(){"use strict";function t(){}const e=t=>t;function n(t){return t()}function s(){return Object.create(null)}function o(t){t.forEach(n)}function r(t){return"function"==typeof t}function i(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}let c;function a(t,e){return c||(c=document.createElement("a")),c.href=e,t===c.href}function l(t,e,n,s){return t[1]&&s?function(t,e){for(const n in e)t[n]=e[n];return t}(n.ctx.slice(),t[1](s(e))):n.ctx}function h(t){return null==t?"":t}const u="undefined"!=typeof window;let p=u?()=>window.performance.now():()=>Date.now(),d=u?t=>requestAnimationFrame(t):t;const f=new Set;function m(t){f.forEach((e=>{e.c(t)||(f.delete(e),e.f())})),0!==f.size&&d(m)}function g(t){let e;return 0===f.size&&d(m),{promise:new Promise((n=>{f.add(e={c:t,f:n})})),abort(){f.delete(e)}}}function y(t,e){t.appendChild(e)}function b(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function v(t){const e=_("style");return function(t,e){y(t.head||t,e)}(b(t),e),e.sheet}function w(t,e,n){t.insertBefore(e,n||null)}function $(t){t.parentNode.removeChild(t)}function k(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function _(t){return document.createElement(t)}function x(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function T(t){return document.createTextNode(t)}function E(){return T(" ")}function j(){return T("")}function C(t,e,n,s){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n,s)}function M(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function O(t){return""===t?null:+t}function N(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function R(t,e){t.value=null==e?"":e}function A(t,e,n=!1){const s=document.createEvent("CustomEvent");return s.initCustomEvent(t,n,!1,e),s}const S=new Map;let B,D=0;function L(t,e,n,s,o,r,i,c=0){const a=16.666/s;let l="{\n";for(let t=0;t<=1;t+=a){const s=e+(n-e)*r(t);l+=100*t+`%{${i(s,1-s)}}\n`}const h=l+`100% {${i(n,1-n)}}\n}`,u=`__svelte_${function(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}(h)}_${c}`,p=b(t),{stylesheet:d,rules:f}=S.get(p)||function(t,e){const n={stylesheet:v(e),rules:{}};return S.set(t,n),n}(p,t);f[u]||(f[u]=!0,d.insertRule(`@keyframes ${u} ${h}`,d.cssRules.length));const m=t.style.animation||"";return t.style.animation=`${m?`${m}, `:""}${u} ${s}ms linear ${o}ms 1 both`,D+=1,u}function P(t,e){const n=(t.style.animation||"").split(", "),s=n.filter(e?t=>t.indexOf(e)<0:t=>-1===t.indexOf("__svelte")),o=n.length-s.length;o&&(t.style.animation=s.join(", "),D-=o,D||d((()=>{D||(S.forEach((t=>{const{stylesheet:e}=t;let n=e.cssRules.length;for(;n--;)e.deleteRule(n);t.rules={}})),S.clear())})))}function I(t){B=t}function F(){if(!B)throw new Error("Function called outside component initialization");return B}function q(){const t=F();return(e,n)=>{const s=t.$$.callbacks[e];if(s){const o=A(e,n);s.slice().forEach((e=>{e.call(t,o)}))}}}const z=[],Y=[],V=[],W=[],G=Promise.resolve();let U=!1;function H(t){V.push(t)}const J=new Set;let X,Z=0;function K(){const t=B;do{for(;Z<z.length;){const t=z[Z];Z++,I(t),Q(t.$$)}for(I(null),z.length=0,Z=0;Y.length;)Y.pop()();for(let t=0;t<V.length;t+=1){const e=V[t];J.has(e)||(J.add(e),e())}V.length=0}while(z.length);for(;W.length;)W.pop()();U=!1,J.clear(),I(t)}function Q(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(H)}}function tt(){return X||(X=Promise.resolve(),X.then((()=>{X=null}))),X}function et(t,e,n){t.dispatchEvent(A(`${e?"intro":"outro"}${n}`))}const nt=new Set;let st;function ot(){st={r:0,c:[],p:st}}function rt(){st.r||o(st.c),st=st.p}function it(t,e){t&&t.i&&(nt.delete(t),t.i(e))}function ct(t,e,n,s){if(t&&t.o){if(nt.has(t))return;nt.add(t),st.c.push((()=>{nt.delete(t),s&&(n&&t.d(1),s())})),t.o(e)}}const at={duration:0};function lt(n,s,o){let i,c,a=s(n,o),l=!1,h=0;function u(){i&&P(n,i)}function d(){const{delay:s=0,duration:o=300,easing:r=e,tick:d=t,css:f}=a||at;f&&(i=L(n,0,1,o,s,r,f,h++)),d(0,1);const m=p()+s,y=m+o;c&&c.abort(),l=!0,H((()=>et(n,!0,"start"))),c=g((t=>{if(l){if(t>=y)return d(1,0),et(n,!0,"end"),u(),l=!1;if(t>=m){const e=r((t-m)/o);d(e,1-e)}}return l}))}let f=!1;return{start(){f||(f=!0,P(n),r(a)?(a=a(),tt().then(d)):d())},invalidate(){f=!1},end(){l&&(u(),l=!1)}}}function ht(n,s,i,c){let a=s(n,i),l=c?0:1,h=null,u=null,d=null;function f(){d&&P(n,d)}function m(t,e){const n=t.b-l;return e*=Math.abs(n),{a:l,b:t.b,d:n,duration:e,start:t.start,end:t.start+e,group:t.group}}function y(s){const{delay:r=0,duration:i=300,easing:c=e,tick:y=t,css:b}=a||at,v={start:p()+r,b:s};s||(v.group=st,st.r+=1),h||u?u=v:(b&&(f(),d=L(n,l,s,i,r,c,b)),s&&y(0,1),h=m(v,i),H((()=>et(n,s,"start"))),g((t=>{if(u&&t>u.start&&(h=m(u,i),u=null,et(n,h.b,"start"),b&&(f(),d=L(n,l,h.b,h.duration,0,c,a.css))),h)if(t>=h.end)y(l=h.b,1-l),et(n,h.b,"end"),u||(h.b?f():--h.group.r||o(h.group.c)),h=null;else if(t>=h.start){const e=t-h.start;l=h.a+h.d*c(e/h.duration),y(l,1-l)}return!(!h&&!u)})))}return{run(t){r(a)?tt().then((()=>{a=a(),y(t)})):y(t)},end(){f(),h=u=null}}}function ut(t){t&&t.c()}function pt(t,e,s,i){const{fragment:c,on_mount:a,on_destroy:l,after_update:h}=t.$$;c&&c.m(e,s),i||H((()=>{const e=a.map(n).filter(r);l?l.push(...e):o(e),t.$$.on_mount=[]})),h.forEach(H)}function dt(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function ft(t,e){-1===t.$$.dirty[0]&&(z.push(t),U||(U=!0,G.then(K)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function mt(e,n,r,i,c,a,l,h=[-1]){const u=B;I(e);const p=e.$$={fragment:null,ctx:null,props:a,update:t,not_equal:c,bound:s(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(u?u.$$.context:[])),callbacks:s(),dirty:h,skip_bound:!1,root:n.target||u.$$.root};l&&l(p.root);let d=!1;if(p.ctx=r?r(e,n.props||{},((t,n,...s)=>{const o=s.length?s[0]:n;return p.ctx&&c(p.ctx[t],p.ctx[t]=o)&&(!p.skip_bound&&p.bound[t]&&p.bound[t](o),d&&ft(e,t)),n})):[],p.update(),d=!0,o(p.before_update),p.fragment=!!i&&i(p.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);p.fragment&&p.fragment.l(t),t.forEach($)}else p.fragment&&p.fragment.c();n.intro&&it(e.$$.fragment),pt(e,n.target,n.anchor,n.customElement),K()}I(u)}class gt{$destroy(){dt(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function yt(t){let e,n,s,o,r=t[0]?"Hosting":"Room";return{c(){e=_("span"),n=_("b"),s=T(r),o=T(t[1]),M(e,"class","svelte-bl26ov")},m(t,r){w(t,e,r),y(e,n),y(n,s),y(e,o)},p(t,e){1&e&&r!==(r=t[0]?"Hosting":"Room")&&N(s,r),2&e&&N(o,t[1])},d(t){t&&$(e)}}}function bt(e){let n,s,r,i,c,a,l,h,u,p,d,f,m,g,b,v=e[1]&&yt(e);return{c(){n=_("header"),s=_("input"),r=E(),i=_("h2"),i.textContent="Re-Framed",c=E(),v&&v.c(),a=E(),l=x("svg"),h=x("filter"),u=x("feColorMatrix"),p=x("feOffset"),d=x("feColorMatrix"),f=x("feOffset"),m=x("feBlend"),M(s,"type","color"),M(s,"class","svelte-bl26ov"),M(i,"class","svelte-bl26ov"),M(u,"type","matrix"),M(u,"result","red_"),M(u,"values","4 0 0 0 0\r\n              0 0 0 0 0 \r\n              0 0 0 0 0 \r\n              0 0 0 1 0"),M(p,"in","red_"),M(p,"dx","1.5"),M(p,"dy","0"),M(p,"result","red"),M(d,"type","matrix"),M(d,"in","SourceGraphic"),M(d,"result","blue_"),M(d,"values","0 0 0 0 0\r\n              0 3 0 0 0 \r\n              0 0 10 0 0 \r\n              0 0 0 1 0"),M(f,"in","blue_"),M(f,"dx","-1.5"),M(f,"dy","0"),M(f,"result","blue"),M(m,"mode","screen"),M(m,"in","red"),M(m,"in2","blue"),M(h,"id","chroma"),M(l,"width","0"),M(l,"height","0"),M(n,"class","svelte-bl26ov")},m(t,o){w(t,n,o),y(n,s),R(s,e[2]),y(n,r),y(n,i),y(n,c),v&&v.m(n,null),y(n,a),y(n,l),y(l,h),y(h,u),y(h,p),y(h,d),y(h,f),y(h,m),g||(b=[C(s,"input",e[4]),C(s,"change",e[3])],g=!0)},p(t,[e]){4&e&&R(s,t[2]),t[1]?v?v.p(t,e):(v=yt(t),v.c(),v.m(n,a)):v&&(v.d(1),v=null)},i:t,o:t,d(t){t&&$(n),v&&v.d(),g=!1,o(b)}}}function vt(t,e,n){let{host:s}=e,{roomCode:o}=e,r="#36d686";return t.$$set=t=>{"host"in t&&n(0,s=t.host),"roomCode"in t&&n(1,o=t.roomCode)},[s,o,r,()=>{console.log(r),document.querySelector(":root").style.setProperty("--accent",r)},function(){r=this.value,n(2,r)}]}class wt extends gt{constructor(t){super(),mt(this,t,vt,bt,i,{host:0,roomCode:1})}}function $t(t){const e=t-1;return e*e*e+1}function kt(t,{delay:e=0,duration:n=400,easing:s=$t,x:o=0,y:r=0,opacity:i=0}={}){const c=getComputedStyle(t),a=+c.opacity,l="none"===c.transform?"":c.transform,h=a*(1-i);return{delay:e,duration:n,easing:s,css:(t,e)=>`\n\t\t\ttransform: ${l} translate(${(1-t)*o}px, ${(1-t)*r}px);\n\t\t\topacity: ${a-h*e}`}}function _t(t,{delay:e=0,duration:n=400,easing:s=$t}={}){const o=getComputedStyle(t),r=+o.opacity,i=parseFloat(o.height),c=parseFloat(o.paddingTop),a=parseFloat(o.paddingBottom),l=parseFloat(o.marginTop),h=parseFloat(o.marginBottom),u=parseFloat(o.borderTopWidth),p=parseFloat(o.borderBottomWidth);return{delay:e,duration:n,easing:s,css:t=>`overflow: hidden;opacity: ${Math.min(20*t,1)*r};height: ${t*i}px;padding-top: ${t*c}px;padding-bottom: ${t*a}px;margin-top: ${t*l}px;margin-bottom: ${t*h}px;border-top-width: ${t*u}px;border-bottom-width: ${t*p}px;`}}function xt(t){let e,n;return{c(){e=_("code"),n=T(t[2]),M(e,"class","svelte-ip68n7")},m(t,s){w(t,e,s),y(e,n)},p(t,e){4&e&&N(n,t[2])},d(t){t&&$(e)}}}function Tt(t){let e,n,s,o,i,c,a;const u=t[5].default,p=function(t,e,n,s){if(t){const o=l(t,e,n,s);return t[0](o)}}(u,t,t[4],null);let d=t[2]&&xt(t);return{c(){e=_("button"),p&&p.c(),s=E(),d&&d.c(),o=j(),e.disabled=t[1],M(e,"class",n=h(t[0])+" svelte-ip68n7")},m(n,l){w(n,e,l),p&&p.m(e,null),w(n,s,l),d&&d.m(n,l),w(n,o,l),i=!0,c||(a=C(e,"click",(function(){r(t[3])&&t[3].apply(this,arguments)})),c=!0)},p(s,[r]){t=s,p&&p.p&&(!i||16&r)&&function(t,e,n,s,o,r){if(o){const i=l(e,n,s,r);t.p(i,o)}}(p,u,t,t[4],i?function(t,e,n,s){if(t[2]&&s){const o=t[2](s(n));if(void 0===e.dirty)return o;if("object"==typeof o){const t=[],n=Math.max(e.dirty.length,o.length);for(let s=0;s<n;s+=1)t[s]=e.dirty[s]|o[s];return t}return e.dirty|o}return e.dirty}(u,t[4],r,null):function(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let t=0;t<n;t++)e[t]=-1;return e}return-1}(t[4]),null),(!i||2&r)&&(e.disabled=t[1]),(!i||1&r&&n!==(n=h(t[0])+" svelte-ip68n7"))&&M(e,"class",n),t[2]?d?d.p(t,r):(d=xt(t),d.c(),d.m(o.parentNode,o)):d&&(d.d(1),d=null)},i(t){i||(it(p,t),i=!0)},o(t){ct(p,t),i=!1},d(t){t&&$(e),p&&p.d(t),t&&$(s),d&&d.d(t),t&&$(o),c=!1,a()}}}function Et(t,e,n){let{$$slots:s={},$$scope:o}=e,{style:r}=e,{disabled:i=!1}=e,{error:c=!1}=e,{func:a=null}=e;return t.$$set=t=>{"style"in t&&n(0,r=t.style),"disabled"in t&&n(1,i=t.disabled),"error"in t&&n(2,c=t.error),"func"in t&&n(3,a=t.func),"$$scope"in t&&n(4,o=t.$$scope)},[r,i,c,a,o,s]}class jt extends gt{constructor(t){super(),mt(this,t,Et,Tt,i,{style:0,disabled:1,error:2,func:3})}}function Ct(e){let n,s;return{c(){n=_("div"),s=T(e[0]),M(n,"class","svelte-d53etn")},m(t,e){w(t,n,e),y(n,s)},p(t,[e]){1&e&&N(s,t[0])},i:t,o:t,d(t){t&&$(n)}}}function Mt(t,e,n){let{msg:s}=e;return t.$$set=t=>{"msg"in t&&n(0,s=t.msg)},[s]}class Ot extends gt{constructor(t){super(),mt(this,t,Mt,Ct,i,{msg:0})}}function Nt(t){let e;return{c(){e=T(t[1])},m(t,n){w(t,e,n)},p(t,n){2&n&&N(e,t[1])},d(t){t&&$(e)}}}function Rt(t){let e,n,s,r,i,c,a,l,h;return r=new jt({props:{disabled:t[5],style:"inline",func:t[10],$$slots:{default:[At]},$$scope:{ctx:t}}}),c=new jt({props:{style:"fadeIn wide",disabled:t[8],func:t[12],$$slots:{default:[St]},$$scope:{ctx:t}}}),{c(){e=_("div"),n=_("input"),s=E(),ut(r.$$.fragment),i=E(),ut(c.$$.fragment),M(n,"type","text"),M(n,"placeholder","Join an existing game"),M(n,"class","svelte-1juwc3w"),M(e,"class","fadeIn inputGroup svelte-1juwc3w")},m(o,u){w(o,e,u),y(e,n),R(n,t[4]),y(e,s),pt(r,e,null),w(o,i,u),pt(c,o,u),a=!0,l||(h=[C(n,"input",t[15]),C(n,"input",t[9])],l=!0)},p(t,e){16&e&&n.value!==t[4]&&R(n,t[4]);const s={};32&e&&(s.disabled=t[5]),1048704&e&&(s.$$scope={dirty:e,ctx:t}),r.$set(s);const o={};256&e&&(o.disabled=t[8]),1048576&e&&(o.$$scope={dirty:e,ctx:t}),c.$set(o)},i(t){a||(it(r.$$.fragment,t),it(c.$$.fragment,t),a=!0)},o(t){ct(r.$$.fragment,t),ct(c.$$.fragment,t),a=!1},d(t){t&&$(e),dt(r),t&&$(i),dt(c,t),l=!1,o(h)}}}function At(t){let e;return{c(){e=T(t[7])},m(t,n){w(t,e,n)},p(t,n){128&n&&N(e,t[7])},d(t){t&&$(e)}}}function St(t){let e;return{c(){e=T("Host a game!")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Bt(t){let e,n;return e=new Ot({props:{msg:t[6]}}),{c(){ut(e.$$.fragment)},m(t,s){pt(e,t,s),n=!0},p(t,n){const s={};64&n&&(s.msg=t[6]),e.$set(s)},i(t){n||(it(e.$$.fragment,t),n=!0)},o(t){ct(e.$$.fragment,t),n=!1},d(t){dt(e,t)}}}function Dt(t){let e,n,s,r,i,c,a,l,h,u,p,d,f,m;a=new jt({props:{disabled:t[3],style:"inline",func:t[11],$$slots:{default:[Nt]},$$scope:{ctx:t}}});let g=t[2]&&Rt(t),b=t[6]&&Bt(t);return{c(){e=_("div"),n=_("header"),n.innerHTML='<h2 class="svelte-1juwc3w">Hi!</h2>\n    This is like\n    <a href="http://framed.wtf" class="svelte-1juwc3w">Framed</a>, only with friends.\n    <br/>\n    Join a room or host your own.\n    <br/> \n    <br/> \n    <h3 class="svelte-1juwc3w">How to Play:</h3>\n    Each turn you will be shown a single image from a film.<br/>Guess what you think it is! <br/> Points are earned based on how few turns you take to guess the film.',s=E(),r=_("div"),i=_("input"),c=E(),ut(a.$$.fragment),l=E(),g&&g.c(),h=E(),b&&b.c(),u=E(),p=_("footer"),p.textContent="In chat no one can hear you scream...",M(n,"class","svelte-1juwc3w"),M(i,"type","text"),M(i,"placeholder","Enter Username (Min. 4 characters)"),M(i,"class","svelte-1juwc3w"),M(r,"class","fadeIn inputGroup svelte-1juwc3w"),M(p,"class","svelte-1juwc3w"),M(e,"class","svelte-1juwc3w")},m(o,v){w(o,e,v),y(e,n),y(e,s),y(e,r),y(r,i),R(i,t[0]),y(r,c),pt(a,r,null),y(e,l),g&&g.m(e,null),y(e,h),b&&b.m(e,null),y(e,u),y(e,p),d=!0,f||(m=[C(i,"input",t[14]),C(i,"input",t[9])],f=!0)},p(t,[n]){1&n&&i.value!==t[0]&&R(i,t[0]);const s={};8&n&&(s.disabled=t[3]),1048578&n&&(s.$$scope={dirty:n,ctx:t}),a.$set(s),t[2]?g?(g.p(t,n),4&n&&it(g,1)):(g=Rt(t),g.c(),it(g,1),g.m(e,h)):g&&(ot(),ct(g,1,1,(()=>{g=null})),rt()),t[6]?b?(b.p(t,n),64&n&&it(b,1)):(b=Bt(t),b.c(),it(b,1),b.m(e,u)):b&&(ot(),ct(b,1,1,(()=>{b=null})),rt())},i(t){d||(it(a.$$.fragment,t),it(g),it(b),d=!0)},o(t){ct(a.$$.fragment,t),ct(g),ct(b),d=!1},d(t){t&&$(e),dt(a),g&&g.d(),b&&b.d(),f=!1,o(m)}}}function Lt(t,e,n){const s=q();let{socket:o}=e,r="",i=!1,c="Set Username",a=!1,l=!1,h="",u=!0,p=!1,d="Join!",f=!0;let m;async function g(){return new Promise(((t,e)=>{var n,i;n=99999,i=1e4,m=Math.floor(Math.random()*(n-i)+i),console.log(`Checking if room ${m} exists`),o.emit("room-exist",m),o.on("room-exist-return",(async e=>{e?(m++,g()):(console.log(`Success, no room found! Now hosting with room code: ${m}`),o.emit("join-room",m),s("boot",{room:m,username:r,host:!0}),t(m))}))}))}return t.$$set=t=>{"socket"in t&&n(13,o=t.socket)},[r,c,a,l,h,u,p,d,f,()=>{i=!1,n(8,f=!0),n(5,u=!0),n(3,l=!0),r.length>=4&&r.length<25&&(i=!0,n(3,l=!1),n(8,f=!1)),i&&5===h.length&&(n(5,u=!1),n(8,f=!0))},()=>{o.emit("room-exist",h),n(7,d="Checking room!"),o.on("room-exist-return",(t=>{t?(o.emit("join-room",h),s("boot",{room:h,username:r,host:!1})):(n(4,h=""),n(7,d="Join!"),n(6,p="Room does not exist, try again."))}))},()=>{o.emit("set-username",r),n(1,c="⏳"),o.on("valid-username",(t=>{t?(n(1,c=`Welcome ${r}!`),n(2,a=!0)):(n(1,c=`${r} taken!`),n(2,a=!1))}))},async()=>{let t=await g();console.log(t)},o,function(){r=this.value,n(0,r)},function(){h=this.value,n(4,h)}]}class Pt extends gt{constructor(t){super(),mt(this,t,Lt,Dt,i,{socket:13})}}function It(t,e,n){const s=t.slice();return s[1]=e[n],s}function Ft(e){let n,s,o,r=e[1]+"";return{c(){n=_("span"),s=T(r),M(n,"class","player svelte-1ohp2hi")},m(t,e){w(t,n,e),y(n,s)},p(t,e){1&e&&r!==(r=t[1]+"")&&N(s,r)},i(t){o||H((()=>{o=lt(n,kt,{y:20}),o.start()}))},o:t,d(t){t&&$(n)}}}function qt(e){let n,s,o,r,i,c=e[0],a=[];for(let t=0;t<c.length;t+=1)a[t]=Ft(It(e,c,t));return{c(){n=_("section"),s=_("h4"),s.textContent="Players in Lobby",o=E(),r=_("div");for(let t=0;t<a.length;t+=1)a[t].c();M(s,"class","svelte-1ohp2hi"),M(r,"class","svelte-1ohp2hi"),M(n,"class","svelte-1ohp2hi")},m(t,e){w(t,n,e),y(n,s),y(n,o),y(n,r);for(let t=0;t<a.length;t+=1)a[t].m(r,null)},p(t,[e]){if(1&e){let n;for(c=t[0],n=0;n<c.length;n+=1){const s=It(t,c,n);a[n]?(a[n].p(s,e),it(a[n],1)):(a[n]=Ft(s),a[n].c(),it(a[n],1),a[n].m(r,null))}for(;n<a.length;n+=1)a[n].d(1);a.length=c.length}},i(t){for(let t=0;t<c.length;t+=1)it(a[t]);i||H((()=>{i=lt(n,kt,{y:110}),i.start()}))},o:t,d(t){t&&$(n),k(a,t)}}}function zt(t,e,n){let{players:s=[]}=e;return t.$$set=t=>{"players"in t&&n(0,s=t.players)},[s]}class Yt extends gt{constructor(t){super(),mt(this,t,zt,qt,i,{players:0})}}function Vt(t){let e,n,s,o,r,i,c,a;return s=new Yt({props:{players:t[0]}}),{c(){e=_("h2"),e.textContent="You are in the Lobby",n=E(),ut(s.$$.fragment),o=E(),r=_("h3"),r.textContent="The host will start the game.",i=E(),c=_("h4"),c.textContent="Why not grab some popcorn or a refreshing drink while you're here?"},m(t,l){w(t,e,l),w(t,n,l),pt(s,t,l),w(t,o,l),w(t,r,l),w(t,i,l),w(t,c,l),a=!0},p(t,[e]){const n={};1&e&&(n.players=t[0]),s.$set(n)},i(t){a||(it(s.$$.fragment,t),a=!0)},o(t){ct(s.$$.fragment,t),a=!1},d(t){t&&$(e),t&&$(n),dt(s,t),t&&$(o),t&&$(r),t&&$(i),t&&$(c)}}}function Wt(t,e,n){let{players:s}=e;return t.$$set=t=>{"players"in t&&n(0,s=t.players)},[s]}class Gt extends gt{constructor(t){super(),mt(this,t,Wt,Vt,i,{players:0})}}function Ut(t){let e;return{c(){e=T("Play!")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Ht(t){let e,n,s,r,i,c,a,l,h,u,p,d,f,m,g,b,v,k,x,T,j;return b=new jt({props:{style:"wide margin-top",func:t[5],$$slots:{default:[Ut]},$$scope:{ctx:t}}}),k=new Yt({props:{players:t[0]}}),{c(){e=_("div"),n=_("h1"),n.textContent="Settings",s=E(),r=_("div"),i=_("h3"),i.textContent="Number of Rounds",c=E(),a=_("span"),l=_("input"),h=E(),u=_("div"),u.innerHTML='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="svelte-1p19jg8"><path d="M21.69 4.887c-.102-1.34-1.133-2.475-2.577-2.578C17.052 2.103 14.165 2 12 2s-5.052.103-7.113.31c-.722 0-1.34.309-1.753.824-.412.515-.722 1.031-.825 1.753C2.103 6.948 2 9.835 2 12s.206 5.052.31 7.113c.102 1.34 1.133 2.475 2.577 2.578C6.948 21.897 9.835 22 12 22s5.052-.206 7.113-.31c1.34-.102 2.475-1.133 2.578-2.577.206-2.061.309-4.948.309-7.113s-.103-5.052-.31-7.113Zm-5.05 8.66c-.207.102-.31.206-.516.206a.788.788 0 0 1-.516-.207l-3.402-3.402a.314.314 0 0 0-.412 0l-3.402 3.402a.809.809 0 0 1-1.134 0 .809.809 0 0 1 0-1.134L10.66 9.01a1.805 1.805 0 0 1 2.577 0l3.402 3.402c.31.413.31.825 0 1.134Z" fill="#232323" class="svelte-1p19jg8"></path></svg>',d=E(),f=_("div"),f.innerHTML='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="svelte-1p19jg8"><path d="M21.69 4.887c-.102-1.34-1.133-2.475-2.577-2.578C17.052 2.103 14.165 2 12 2s-5.052.103-7.113.31c-.722 0-1.34.309-1.753.824-.412.515-.722 1.031-.825 1.753C2.103 6.948 2 9.835 2 12s.206 5.052.31 7.113c.102 1.34 1.133 2.475 2.577 2.578C6.948 21.897 9.835 22 12 22s5.052-.206 7.113-.31c1.34-.102 2.475-1.133 2.578-2.577.206-2.061.309-4.948.309-7.113s-.103-5.052-.31-7.113Zm-5.05 6.598-3.403 3.402c-.31.309-.825.515-1.237.515-.412 0-.928-.206-1.237-.515L7.36 11.485a.809.809 0 0 1 0-1.134.809.809 0 0 1 1.134 0l3.402 3.402c.103.103.31.103.412 0l3.402-3.402a.809.809 0 0 1 1.134 0c.104.412.104.824-.206 1.133Z" fill="#232323" class="svelte-1p19jg8"></path></svg>',g=E(),ut(b.$$.fragment),v=E(),ut(k.$$.fragment),M(i,"class","svelte-1p19jg8"),M(l,"type","number"),M(l,"min","1"),M(l,"max","10"),M(l,"class","svelte-1p19jg8"),M(u,"class","svelte-1p19jg8"),M(f,"class","svelte-1p19jg8"),M(a,"id","inputWrap"),M(a,"class","svelte-1p19jg8"),M(r,"class","inputGroup svelte-1p19jg8"),M(e,"class","svelte-1p19jg8")},m(o,p){w(o,e,p),y(e,n),y(e,s),y(e,r),y(r,i),y(r,c),y(r,a),y(a,l),R(l,t[1]),y(a,h),y(a,u),y(a,d),y(a,f),y(e,g),pt(b,e,null),y(e,v),pt(k,e,null),x=!0,T||(j=[C(window,"keydown",t[2]),C(l,"input",t[6]),C(u,"click",t[3]),C(f,"click",t[4])],T=!0)},p(t,[e]){2&e&&O(l.value)!==t[1]&&R(l,t[1]);const n={};512&e&&(n.$$scope={dirty:e,ctx:t}),b.$set(n);const s={};1&e&&(s.players=t[0]),k.$set(s)},i(t){x||(p||H((()=>{p=lt(u,kt,{x:50}),p.start()})),m||H((()=>{m=lt(f,kt,{x:50,delay:200}),m.start()})),it(b.$$.fragment,t),it(k.$$.fragment,t),x=!0)},o(t){ct(b.$$.fragment,t),ct(k.$$.fragment,t),x=!1},d(t){t&&$(e),dt(b),dt(k),T=!1,o(j)}}}function Jt(t,e,n){const s=q();let{players:o}=e,r=5;function i(){10!==r&&n(1,r+=1)}function c(){1!==r&&n(1,r-=1)}return t.$$set=t=>{"players"in t&&n(0,o=t.players)},[o,r,function(t){"ArrowUp"===t.key&&i(),"ArrowDown"===t.key&&c()},i,c,function(){s("startGame",{numberOfRounds:r,roundTimer:null})},function(){r=O(this.value),n(1,r)}]}class Xt extends gt{constructor(t){super(),mt(this,t,Jt,Ht,i,{players:0})}}function Zt(t,e,n){const s=t.slice();return s[4]=e[n],s[6]=n,s}function Kt(t){let e,n,s,o,r,i,c,a=t[0].turns+"",l={length:5},h=[];for(let e=0;e<l.length;e+=1)h[e]=Qt(Zt(t,l,e));return{c(){e=_("h2"),e.textContent="Congrats!",n=E(),s=_("p"),o=T("You got it in "),r=T(a),i=E(),c=_("section");for(let t=0;t<h.length;t+=1)h[t].c();M(e,"class","svelte-pnjgun"),M(s,"class","svelte-pnjgun"),M(c,"class","svelte-pnjgun")},m(t,a){w(t,e,a),w(t,n,a),w(t,s,a),y(s,o),y(s,r),w(t,i,a),w(t,c,a);for(let t=0;t<h.length;t+=1)h[t].m(c,null)},p(t,e){if(1&e&&a!==(a=t[0].turns+"")&&N(r,a),1&e){let n;for(l={length:5},n=0;n<l.length;n+=1){const s=Zt(t,l,n);h[n]?h[n].p(s,e):(h[n]=Qt(s),h[n].c(),h[n].m(c,null))}for(;n<h.length;n+=1)h[n].d(1);h.length=l.length}},d(t){t&&$(e),t&&$(n),t&&$(s),t&&$(i),t&&$(c),k(h,t)}}}function Qt(t){let e,n;return{c(){e=_("span"),M(e,"class",n=h(t[0].turns>t[6]+1?"red":t[0].turns<t[6]+1?"":"green")+" svelte-pnjgun")},m(t,n){w(t,e,n)},p(t,s){1&s&&n!==(n=h(t[0].turns>t[6]+1?"red":t[0].turns<t[6]+1?"":"green")+" svelte-pnjgun")&&M(e,"class",n)},d(t){t&&$(e)}}}function te(t){let e;return{c(){e=T("Go to Leaderboard")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function ee(t){let e,n,s,o,r,i,c,l,h,u,p,d,f,m,g,b,v,k,x,j,C,O,R,A,S,B,D,L,P=t[1].Title+"",I=t[1].Year+"",F=t[1].Director+"",q=t[1].Screenwriter+"",z=t[1].Starring+"",Y=t[0].won&&Kt(t);return O=new jt({props:{style:"margin-top",func:t[3],$$slots:{default:[te]},$$scope:{ctx:t}}}),{c(){e=_("div"),n=_("div"),Y&&Y.c(),s=E(),o=_("a"),r=_("h2"),i=T(P),c=T(" ("),l=T(I),h=T(")"),p=E(),d=_("p"),f=T("Directed by "),m=T(F),g=_("br"),b=T(" Written by "),v=T(q),k=_("br"),x=T("Starring "),j=T(z),C=E(),ut(O.$$.fragment),R=E(),A=_("div"),S=_("img"),M(r,"class","svelte-pnjgun"),M(o,"href",u=t[1].IMDB),M(o,"class","svelte-pnjgun"),M(d,"class","svelte-pnjgun"),M(n,"class","svelte-pnjgun"),M(S,"class","fadeIn svelte-pnjgun"),a(S.src,B=t[1].Poster)||M(S,"src",B),M(S,"alt",D=t[1].Title),M(A,"class","svelte-pnjgun"),M(e,"id","results"),M(e,"class","svelte-pnjgun")},m(t,a){w(t,e,a),y(e,n),Y&&Y.m(n,null),y(n,s),y(n,o),y(o,r),y(r,i),y(r,c),y(r,l),y(r,h),y(n,p),y(n,d),y(d,f),y(d,m),y(d,g),y(d,b),y(d,v),y(d,k),y(d,x),y(d,j),y(n,C),pt(O,n,null),y(e,R),y(e,A),y(A,S),L=!0},p(t,[e]){t[0].won?Y?Y.p(t,e):(Y=Kt(t),Y.c(),Y.m(n,s)):Y&&(Y.d(1),Y=null),(!L||2&e)&&P!==(P=t[1].Title+"")&&N(i,P),(!L||2&e)&&I!==(I=t[1].Year+"")&&N(l,I),(!L||2&e&&u!==(u=t[1].IMDB))&&M(o,"href",u),(!L||2&e)&&F!==(F=t[1].Director+"")&&N(m,F),(!L||2&e)&&q!==(q=t[1].Screenwriter+"")&&N(v,q),(!L||2&e)&&z!==(z=t[1].Starring+"")&&N(j,z);const r={};128&e&&(r.$$scope={dirty:e,ctx:t}),O.$set(r),(!L||2&e&&!a(S.src,B=t[1].Poster))&&M(S,"src",B),(!L||2&e&&D!==(D=t[1].Title))&&M(S,"alt",D)},i(t){L||(it(O.$$.fragment,t),L=!0)},o(t){ct(O.$$.fragment,t),L=!1},d(t){t&&$(e),Y&&Y.d(),dt(O)}}}function ne(t,e,n){let{roundOutcome:s}=e,{data:o}=e;const r=q();return t.$$set=t=>{"roundOutcome"in t&&n(0,s=t.roundOutcome),"data"in t&&n(1,o=t.data)},[s,o,r,()=>{r("roundOver")}]}class se extends gt{constructor(t){super(),mt(this,t,ne,ee,i,{roundOutcome:0,data:1})}}function oe(t,e,n){const s=t.slice();return s[26]=e[n],s[28]=n,s}function re(t,e,n){const s=t.slice();return s[29]=e[n],s}function ie(t,e,n){const s=t.slice();return s[32]=e[n],s[28]=n,s}function ce(t){let e,n,s,o,r,i,c=t[28]+1+"";function a(){return t[20](t[28])}return{c(){e=_("div"),n=T(c),s=E(),M(e,"class",o=h(t[2]===t[28]+1?"selected":"")+" svelte-1sxdhaf")},m(t,o){w(t,e,o),y(e,n),y(e,s),r||(i=C(e,"click",a),r=!0)},p(n,s){t=n,4&s[0]&&o!==(o=h(t[2]===t[28]+1?"selected":"")+" svelte-1sxdhaf")&&M(e,"class",o)},d(t){t&&$(e),r=!1,i()}}}function ae(t){let e,n;return e=new se({props:{roundOutcome:t[8],data:t[11]}}),e.$on("roundOver",t[16]),{c(){ut(e.$$.fragment)},m(t,s){pt(e,t,s),n=!0},p(t,n){const s={};256&n[0]&&(s.roundOutcome=t[8]),e.$set(s)},i(t){n||(it(e.$$.fragment,t),n=!0)},o(t){ct(e.$$.fragment,t),n=!1},d(t){dt(e,t)}}}function le(t){let e,n,s,r,i,c,a,l,h,u,p,d=t[4],f=[];for(let e=0;e<d.length;e+=1)f[e]=he(re(t,d,e));let m=t[10],g=[];for(let e=0;e<m.length;e+=1)g[e]=ue(oe(t,m,e));const b=t=>ct(g[t],1,1,(()=>{g[t]=null}));return l=new jt({props:{disabled:t[9],style:"wide",func:t[15],$$slots:{default:[pe]},$$scope:{ctx:t}}}),{c(){e=_("ul");for(let t=0;t<f.length;t+=1)f[t].c();n=E(),s=_("div"),r=_("input"),i=E(),c=_("ul");for(let t=0;t<g.length;t+=1)g[t].c();a=E(),ut(l.$$.fragment),M(e,"id","guessGrid"),M(e,"class","svelte-1sxdhaf"),M(r,"type","text"),M(r,"class","svelte-1sxdhaf"),M(c,"id","autoselect"),M(c,"class","svelte-1sxdhaf"),M(s,"id","inputBox"),s.hidden=t[6],M(s,"class","svelte-1sxdhaf")},m(o,d){w(o,e,d);for(let t=0;t<f.length;t+=1)f[t].m(e,null);w(o,n,d),w(o,s,d),y(s,r),R(r,t[3]),y(s,i),y(s,c);for(let t=0;t<g.length;t+=1)g[t].m(c,null);w(o,a,d),pt(l,o,d),h=!0,u||(p=[C(r,"input",t[21]),C(r,"input",t[12])],u=!0)},p(t,n){if(16&n[0]){let s;for(d=t[4],s=0;s<d.length;s+=1){const o=re(t,d,s);f[s]?f[s].p(o,n):(f[s]=he(o),f[s].c(),f[s].m(e,null))}for(;s<f.length;s+=1)f[s].d(1);f.length=d.length}if(8&n[0]&&r.value!==t[3]&&R(r,t[3]),17408&n[0]){let e;for(m=t[10],e=0;e<m.length;e+=1){const s=oe(t,m,e);g[e]?(g[e].p(s,n),it(g[e],1)):(g[e]=ue(s),g[e].c(),it(g[e],1),g[e].m(c,null))}for(ot(),e=m.length;e<g.length;e+=1)b(e);rt()}(!h||64&n[0])&&(s.hidden=t[6]);const o={};512&n[0]&&(o.disabled=t[9]),32&n[0]|8&n[1]&&(o.$$scope={dirty:n,ctx:t}),l.$set(o)},i(t){if(!h){for(let t=0;t<m.length;t+=1)it(g[t]);it(l.$$.fragment,t),h=!0}},o(t){g=g.filter(Boolean);for(let t=0;t<g.length;t+=1)ct(g[t]);ct(l.$$.fragment,t),h=!1},d(t){t&&$(e),k(f,t),t&&$(n),t&&$(s),k(g,t),t&&$(a),dt(l,t),u=!1,o(p)}}}function he(t){let e,n,s,o=t[29].text+"";return{c(){e=_("li"),n=T(o),M(e,"class",s=h(t[29].outcome)+" svelte-1sxdhaf")},m(t,s){w(t,e,s),y(e,n)},p(t,r){16&r[0]&&o!==(o=t[29].text+"")&&N(n,o),16&r[0]&&s!==(s=h(t[29].outcome)+" svelte-1sxdhaf")&&M(e,"class",s)},d(t){t&&$(e)}}}function ue(t){let e,n,s,o,r,i,c,a,l=t[26]+"";function h(){return t[22](t[26])}return{c(){e=_("li"),n=T(l),s=E(),M(e,"name",o=t[26]),M(e,"class","svelte-1sxdhaf")},m(t,o){w(t,e,o),y(e,n),y(e,s),i=!0,c||(a=C(e,"click",h),c=!0)},p(s,r){t=s,(!i||1024&r[0])&&l!==(l=t[26]+"")&&N(n,l),(!i||1024&r[0]&&o!==(o=t[26]))&&M(e,"name",o)},i(t){i||(H((()=>{r||(r=ht(e,_t,{duration:200},!0)),r.run(1)})),i=!0)},o(t){r||(r=ht(e,_t,{duration:200},!1)),r.run(0),i=!1},d(t){t&&$(e),t&&r&&r.end(),c=!1,a()}}}function pe(t){let e;return{c(){e=T(t[5])},m(t,n){w(t,e,n)},p(t,n){32&n[0]&&N(e,t[5])},d(t){t&&$(e)}}}function de(t){let e,n,s,o,r,i,c,l,h,u,p={length:t[1]},d=[];for(let e=0;e<p.length;e+=1)d[e]=ce(ie(t,p,e));const f=[le,ae],m=[];function g(t,e){return t[7]?1:0}return l=g(t),h=m[l]=f[l](t),{c(){e=_("div"),n=_("div"),s=_("img"),r=E(),i=_("div");for(let t=0;t<d.length;t+=1)d[t].c();c=E(),h.c(),a(s.src,o=t[0])||M(s,"src",o),M(s,"alt",t[11].id),M(s,"class","svelte-1sxdhaf"),M(i,"class","numList svelte-1sxdhaf"),M(n,"id","topBox")},m(t,o){w(t,e,o),y(e,n),y(n,s),y(n,r),y(n,i);for(let t=0;t<d.length;t+=1)d[t].m(i,null);y(e,c),m[l].m(e,null),u=!0},p(t,n){if((!u||1&n[0]&&!a(s.src,o=t[0]))&&M(s,"src",o),8198&n[0]){let e;for(p={length:t[1]},e=0;e<p.length;e+=1){const s=ie(t,p,e);d[e]?d[e].p(s,n):(d[e]=ce(s),d[e].c(),d[e].m(i,null))}for(;e<d.length;e+=1)d[e].d(1);d.length=p.length}let r=l;l=g(t),l===r?m[l].p(t,n):(ot(),ct(m[r],1,1,(()=>{m[r]=null})),rt(),h=m[l],h?h.p(t,n):(h=m[l]=f[l](t),h.c()),it(h,1),h.m(e,null))},i(t){u||(it(h),u=!0)},o(t){ct(h),u=!1},d(t){t&&$(e),k(d,t),m[l].d()}}}function fe(t,e,n){const s=q();let o,r,i,{roomData:c}=e,{filmData:a}=e,{filmNames:l}=e,h=1,u=1,p=[],d="Guess!",f=!1,m=!1,g=!0;for(let t=0;t<5;t++)p.push({text:"",outcome:"blank"});let y=[];console.log(c);let b=c.currentRound-1,v={name:l[c.films[b]],id:c.films[b]};function w(t){if(void 0!==t){if(!v[t])return console.log("Image missing!"),void n(0,o="https://i1.wp.com/www.joshuacasper.com/contents/uploads/media-offline-adobe-media-encoder-fixed.jpg?ssl=1");console.log(v),console.log(`${v.prefix}/${v[t]}`),n(0,o=`${v.prefix}/${v[t]}`)}}Object.assign(v,a[v.name]),console.log(v),w(h-1);function $(t){console.log(`clicked: ${t}`),console.log("WOW"),n(2,u=t+1),w(t)}function k(t){n(10,y=[]),n(3,r=t)}return t.$$set=t=>{"roomData"in t&&n(17,c=t.roomData),"filmData"in t&&n(18,a=t.filmData),"filmNames"in t&&n(19,l=t.filmNames)},[o,h,u,r,p,d,f,m,i,g,y,v,()=>{if(""===r||" "===r)return n(9,g=!0),void n(10,y=[]);n(9,g=!1);let t=r.toUpperCase();for(let e=y.length-1;e>=0;e--){if(!y[e])continue;let s=y[e];console.log(y),console.log(`${e}:${s}, ${t}, ${s.includes(t)}`),s.includes(t)||(y.splice(e,1),n(10,y))}console.log(y);for(let e=0;e<l.length&&!(!y.includes(l[e])&&l[e].includes(t)&&(n(10,y=[...y,l[e]]),y.length>=6));e++);},$,k,function(){let t=p[h-1];return t.text=r,n(8,i={turns:h,won:null}),r===v.name?(n(7,m=!0),n(8,i.won=!0,i),$(h-1),n(1,h=5),n(6,f=!0),n(3,r=""),t.outcome="correct",n(4,p),void n(5,d="Correct!")):(n(3,r=""),t.outcome="wrong",n(4,p),"wrong"===p[4].outcome?(console.log("LOSE!"),n(8,i.won=!1,i),void n(7,m=!0)):($(h),void n(1,h+=1)))},function(){s("roundOver",i)},c,a,l,t=>{$(t)},function(){r=this.value,n(3,r)},t=>{k(t)}]}class me extends gt{constructor(t){super(),mt(this,t,fe,de,i,{roomData:17,filmData:18,filmNames:19},null,[-1,-1])}}function ge(t,e,n){const s=t.slice();return s[7]=e[n],s[9]=n,s}function ye(t){let e,n,s,o,r=t[0][0].username+"";return{c(){e=_("h3"),n=T("Congrats "),s=T(r),o=T("!")},m(t,r){w(t,e,r),y(e,n),y(e,s),y(e,o)},p(t,e){1&e&&r!==(r=t[0][0].username+"")&&N(s,r)},d(t){t&&$(e)}}}function be(e){let n,s,o,r,i,c,a,l=e[7].username+"",h=e[7].points+"";return{c(){n=_("span"),s=_("b"),o=T(l),r=T(": "),i=T(h),c=T(" points"),M(n,"class","svelte-qssiyu")},m(t,e){w(t,n,e),y(n,s),y(s,o),y(n,r),y(n,i),y(n,c)},p(t,e){1&e&&l!==(l=t[7].username+"")&&N(o,l),1&e&&h!==(h=t[7].points+"")&&N(i,h)},i(t){a||H((()=>{a=lt(n,kt,{}),a.start()}))},o:t,d(t){t&&$(n)}}}function ve(t){let e,n,s,o;return e=new jt({props:{style:"margin-top",disabled:t[2],func:t[4],$$slots:{default:[we]},$$scope:{ctx:t}}}),{c(){ut(e.$$.fragment),n=E(),s=_("p")},m(t,r){pt(e,t,r),w(t,n,r),w(t,s,r),o=!0},p(t,n){const s={};4&n&&(s.disabled=t[2]),16&n&&(s.func=t[4]),1032&n&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){o||(it(e.$$.fragment,t),o=!0)},o(t){ct(e.$$.fragment,t),o=!1},d(t){dt(e,t),t&&$(n),t&&$(s)}}}function we(t){let e;return{c(){e=T(t[3])},m(t,n){w(t,e,n)},p(t,n){8&n&&N(e,t[3])},d(t){t&&$(e)}}}function $e(t){let e,n,s,o,r,i,c,a=t[2]&&ye(t),l=t[0],h=[];for(let e=0;e<l.length;e+=1)h[e]=be(ge(t,l,e));let u=t[1]&&ve(t);return{c(){e=_("div"),n=_("h1"),n.textContent="Leaderboard!",s=E(),a&&a.c(),o=E(),r=_("div");for(let t=0;t<h.length;t+=1)h[t].c();i=E(),u&&u.c(),M(r,"class","svelte-qssiyu"),M(e,"class","svelte-qssiyu")},m(t,l){w(t,e,l),y(e,n),y(e,s),a&&a.m(e,null),y(e,o),y(e,r);for(let t=0;t<h.length;t+=1)h[t].m(r,null);y(e,i),u&&u.m(e,null),c=!0},p(t,[n]){if(t[2]?a?a.p(t,n):(a=ye(t),a.c(),a.m(e,o)):a&&(a.d(1),a=null),1&n){let e;for(l=t[0],e=0;e<l.length;e+=1){const s=ge(t,l,e);h[e]?(h[e].p(s,n),it(h[e],1)):(h[e]=be(s),h[e].c(),it(h[e],1),h[e].m(r,null))}for(;e<h.length;e+=1)h[e].d(1);h.length=l.length}t[1]?u?(u.p(t,n),2&n&&it(u,1)):(u=ve(t),u.c(),it(u,1),u.m(e,null)):u&&(ot(),ct(u,1,1,(()=>{u=null})),rt())},i(t){if(!c){for(let t=0;t<l.length;t+=1)it(h[t]);it(u),c=!0}},o(t){ct(u),c=!1},d(t){t&&$(e),a&&a.d(),k(h,t),u&&u.d()}}}function ke(t,e,n){let{leaderboardData:s=[{username:""}]}=e,{hosting:o}=e,{roomData:r}=e,{socket:i}=e,c=!1,a=`On to Round ${r.currentRound+1}`,l=()=>{i.emit("next-round","")};return r.currentRound===r.numberOfRounds&&(c=!0,a="Cheeky one more?",l=()=>{location.reload()}),console.log(r),t.$$set=t=>{"leaderboardData"in t&&n(0,s=t.leaderboardData),"hosting"in t&&n(1,o=t.hosting),"roomData"in t&&n(5,r=t.roomData),"socket"in t&&n(6,i=t.socket)},[s,o,c,a,l,r,i]}class _e extends gt{constructor(t){super(),mt(this,t,ke,$e,i,{leaderboardData:0,hosting:1,roomData:5,socket:6})}}var xe={"LAST NIGHT IN SOHO":{0:"Last_Night_In_Soho_008.jpg",1:"Last_Night_In_Soho_025.jpg",2:"Last_Night_In_Soho_001.jpg",3:"Last_Night_In_Soho_026.jpg",4:"Last_Night_In_Soho_014.jpg",Title:"Last Night in Soho",Year:"2021",Poster:"https://m.media-amazon.com/images/M/MV5BZjgwZDIwY2MtNGZlNy00NGRlLWFmNTgtOTBkZThjMDUwMGJhXkEyXkFqcGdeQXVyMTEyMjM2NDc2._V1_.jpg",Director:"Edgar Wright",Screenwriter:"Edgar Wright, Krysty Wilson-Cairns",Starring:"Thomasin McKenzie, Anya Taylor-Joy, Matt Smith",IMDB:"https://www.imdb.com/title/tt9639470",prefix:"https://film-grab.com/wp-content/uploads/photo-gallery"},TAMPOPO:{0:"Tampopo_13.jpg",1:"Tampopo_31.jpg",2:"Tampopo_08.jpg",3:"Tampopo_12.jpg",4:"Tampopo_44.jpg",Title:"Tampopo",Year:"1985",Poster:"https://m.media-amazon.com/images/M/MV5BOTE5ZWY2MGEtYjA5ZS00YjdkLTk1MmMtNGFhMDRlNTkzNTRiXkEyXkFqcGdeQXVyMTIyNzY1NzM@._V1_.jpg",Director:"Jûzô Itami",Screenwriter:"Jûzô Itami",Starring:"Ken Watanabe, Nobuko Miyamoto",IMDB:"https://www.imdb.com/title/tt0078748",prefix:"https://film-grab.com/wp-content/uploads/photo-gallery"},ALIEN:{0:"image039%20(1).jpg",1:"image007%20(1).jpg",2:"image010%20(1).jpg",3:"image018%20(1).jpg",4:"image019%20(1).jpg",Title:"Alien",Year:"1979",Poster:"https://m.media-amazon.com/images/M/MV5BOGQzZTBjMjQtOTVmMS00NGE5LWEyYmMtOGQ1ZGZjNmRkYjFhXkEyXkFqcGdeQXVyMjUzOTY1NTc@._V1_.jpg",Director:"Ridley Scott",Screenwriter:"Dan O'Bannon, Ronald Shusett",Starring:"Sigourney Weaver, Tom Skerritt, John Hurt",IMDB:"https://www.imdb.com/title/tt0092048",prefix:"https://film-grab.com/wp-content/uploads/photo-gallery"},"ME AND EARL AND THE DYING GIRL":{0:"Me_and_Earl_035.jpg",1:"Me_and_Earl_062.jpg",2:"Me_and_Earl_042.jpg",3:"Me_and_Earl_016.jpg",4:"Me_and_Earl_028.jpg",Title:"Me and Earl and the Dying Girl",Year:"2015",Poster:"https://m.media-amazon.com/images/M/MV5BZTUwZTkxOGMtMmFjYS00MWU2LTk2YjAtNWUzMzAwODM0NzdiXkEyXkFqcGdeQXVyNTA3MTU2MjE@._V1_.jpg",Director:"Alfonso Gomez-Rejon",Screenwriter:"Jesse Andrews",Starring:"Thomas Mann, RJ Cyler, Olivia Cooke",IMDB:"https://www.imdb.com/title/tt2582496/",prefix:"https://film-grab.com/wp-content/uploads/photo-gallery"},IT:{0:"it026.jpg",1:"it008.jpg",2:"it034.jpg",3:"it009.jpg",4:"it005.jpg",Title:"It",Year:"2017",Poster:"https://m.media-amazon.com/images/M/MV5BZDVkZmI0YzAtNzdjYi00ZjhhLWE1ODEtMWMzMWMzNDA0NmQ4XkEyXkFqcGdeQXVyNzYzODM3Mzg@._V1_FMjpg_UX1000_.jpg",Director:"Andy Muschietti",Screenwriter:"Chase Palmer, Cary Joji Fukunaga, Gary Dauberman",Starring:"Bill Skarsgård, Jaeden Martell, Sophia Lillis",IMDB:"https://www.imdb.com/title/tt1396484/",prefix:"https://film-grab.com/wp-content/uploads/photo-gallery"},"THE LOST WORLD: JURASSIC PARK":{0:"Jurassic_Park_The_Lost_World_002.jpg",1:"Jurassic_Park_The_Lost_World_048.jpg",2:"Jurassic_Park_The_Lost_World_030.jpg",3:"Jurassic_Park_The_Lost_World_025.jpg",4:"Jurassic_Park_The_Lost_World_060.jpg",Title:"The Lost World: Jurassic Park",Year:"1997",Poster:"https://m.media-amazon.com/images/M/MV5BMDFlMmM4Y2QtNDg1ZS00MWVlLTlmODgtZDdhYjY5YjdhN2M0XkEyXkFqcGdeQXVyNTI4MjkwNjA@._V1_.jpg",Director:"Steven Spielberg",Screenwriter:"David Koepp, Micheal Crichton",Starring:"Jeff Goldblum, Julianne Moore, Pete Postlethwaite",IMDB:"https://www.imdb.com/title/tt0119567",prefix:"https://film-grab.com/wp-content/uploads/photo-gallery"},TWISTER:{0:"Twister_017.jpg",1:"Twister_021.jpg",2:"Twister_015.jpg",3:"Twister_032.jpg",4:"Twister_057.jpg",Title:"Twister",Year:"1996",Poster:"https://m.media-amazon.com/images/M/MV5BODExYTM0MzEtZGY2Yy00N2ExLTkwZjItNGYzYTRmMWZlOGEzXkEyXkFqcGdeQXVyNDk3NzU2MTQ@._V1_.jpg",Director:"Jan de Bont",Screenwriter:"Anne-Marie Martin, Micheal Crichton",Starring:"Helen Hunt, Bill Paxton, Cary Elwes",IMDB:"https://www.imdb.com/title/tt0117998",prefix:"https://film-grab.com/wp-content/uploads/photo-gallery"},"THE PRESTIGE":{0:"06%20(1139).jpg",1:"12%20(1163).jpg",2:"01%20(1140).jpg",3:"15%20(1163).jpg",4:"45%20(1142).jpg",Title:"The Prestige",Year:"2006",Poster:"https://m.media-amazon.com/images/M/MV5BMjA4NDI0MTIxNF5BMl5BanBnXkFtZTYwNTM0MzY2._V1_FMjpg_UX1000_.jpg",Director:"Christopher Nolan",Screenwriter:"Jonathan Nolan, Christopher Nolan",Starring:"Christian Bale, Hugh Jackman, Scarlett Johansson",IMDB:"https://www.imdb.com/title/tt0482571",prefix:"https://film-grab.com/wp-content/uploads/photo-gallery"},"DAZED AND CONFUSED":{0:"vlcsnap-2014-07-14-11h23m09s215.png",1:"vlcsnap-2014-07-14-11h51m25s68.png",2:"vlcsnap-2014-07-14-11h33m23s2.png",3:"vlcsnap-2014-07-14-11h29m36s27.png",4:"vlcsnap-2014-07-14-11h41m43s134.png",Title:"Dazed and Confused",Year:"1993",Poster:"https://m.media-amazon.com/images/M/MV5BMTM5MDY5MDQyOV5BMl5BanBnXkFtZTgwMzM3NzMxMDE@._V1_FMjpg_UX1000_.jpg",Director:"Richard Linklater",Screenwriter:"Richard Linklater",Starring:"Jason London, Wiley Wiggins, Matthew McConaughey",IMDB:"https://www.imdb.com/title/tt0106677/",prefix:"https://film-grab.com/wp-content/uploads/photo-gallery"}};function Te(t){let e,n;return e=new Pt({props:{socket:t[0]}}),e.$on("boot",t[9]),{c(){ut(e.$$.fragment)},m(t,s){pt(e,t,s),n=!0},p(t,n){const s={};1&n&&(s.socket=t[0]),e.$set(s)},i(t){n||(it(e.$$.fragment,t),n=!0)},o(t){ct(e.$$.fragment,t),n=!1},d(t){dt(e,t)}}}function Ee(t){let e,n,s,o;const r=[Me,Ce],i=[];function c(t,e){return t[4]?0:1}return e=c(t),n=i[e]=r[e](t),{c(){n.c(),s=j()},m(t,n){i[e].m(t,n),w(t,s,n),o=!0},p(t,o){let a=e;e=c(t),e===a?i[e].p(t,o):(ot(),ct(i[a],1,1,(()=>{i[a]=null})),rt(),n=i[e],n?n.p(t,o):(n=i[e]=r[e](t),n.c()),it(n,1),n.m(s.parentNode,s))},i(t){o||(it(n),o=!0)},o(t){ct(n),o=!1},d(t){i[e].d(t),t&&$(s)}}}function je(t){let e,n,s,o;const r=[Ne,Oe],i=[];function c(t,e){return t[3]?0:1}return e=c(t),n=i[e]=r[e](t),{c(){n.c(),s=j()},m(t,n){i[e].m(t,n),w(t,s,n),o=!0},p(t,o){let a=e;e=c(t),e===a?i[e].p(t,o):(ot(),ct(i[a],1,1,(()=>{i[a]=null})),rt(),n=i[e],n?n.p(t,o):(n=i[e]=r[e](t),n.c()),it(n,1),n.m(s.parentNode,s))},i(t){o||(it(n),o=!0)},o(t){ct(n),o=!1},d(t){i[e].d(t),t&&$(s)}}}function Ce(t){let e,n;return e=new Gt({props:{players:t[7]}}),{c(){ut(e.$$.fragment)},m(t,s){pt(e,t,s),n=!0},p(t,n){const s={};128&n&&(s.players=t[7]),e.$set(s)},i(t){n||(it(e.$$.fragment,t),n=!0)},o(t){ct(e.$$.fragment,t),n=!1},d(t){dt(e,t)}}}function Me(t){let e,n;return e=new Xt({props:{players:t[7]}}),e.$on("startGame",t[10]),{c(){ut(e.$$.fragment)},m(t,s){pt(e,t,s),n=!0},p(t,n){const s={};128&n&&(s.players=t[7]),e.$set(s)},i(t){n||(it(e.$$.fragment,t),n=!0)},o(t){ct(e.$$.fragment,t),n=!1},d(t){dt(e,t)}}}function Oe(t){let e,n;return e=new me({props:{roomData:t[5],filmData:xe,filmNames:t[8]}}),e.$on("roundOver",t[11]),{c(){ut(e.$$.fragment)},m(t,s){pt(e,t,s),n=!0},p(t,n){const s={};32&n&&(s.roomData=t[5]),e.$set(s)},i(t){n||(it(e.$$.fragment,t),n=!0)},o(t){ct(e.$$.fragment,t),n=!1},d(t){dt(e,t)}}}function Ne(t){let e,n;return e=new _e({props:{socket:t[0],leaderboardData:t[6],hosting:t[4],roomData:t[5]}}),{c(){ut(e.$$.fragment)},m(t,s){pt(e,t,s),n=!0},p(t,n){const s={};1&n&&(s.socket=t[0]),64&n&&(s.leaderboardData=t[6]),16&n&&(s.hosting=t[4]),32&n&&(s.roomData=t[5]),e.$set(s)},i(t){n||(it(e.$$.fragment,t),n=!0)},o(t){ct(e.$$.fragment,t),n=!1},d(t){dt(e,t)}}}function Re(t){let e,n,s,o;const r=[je,Ee,Te],i=[];function c(t,e){return t[2]?0:t[1]?1:2}return n=c(t),s=i[n]=r[n](t),{c(){e=_("game"),s.c(),M(e,"class","svelte-o2bhwz")},m(t,s){w(t,e,s),i[n].m(e,null),o=!0},p(t,[o]){let a=n;n=c(t),n===a?i[n].p(t,o):(ot(),ct(i[a],1,1,(()=>{i[a]=null})),rt(),s=i[n],s?s.p(t,o):(s=i[n]=r[n](t),s.c()),it(s,1),s.m(e,null))},i(t){o||(it(s),o=!0)},o(t){ct(s),o=!1},d(t){t&&$(e),i[n].d()}}}function Ae(t,e,n){const s=q();let o,r,i,{socket:c}=e,a=Object.keys(xe),l=!1,h=!1,u=!1,{roomCode:p}=e,d=[];return console.log(xe),c.on("player-joined",(t=>{console.log("Player joined room"),console.log(t),n(7,d=t)})),c.on("round-start",(t=>{n(5,r=t),n(2,h=!0),n(3,u=!1)})),c.on("leaderboard-update",(t=>{n(6,i=t),console.log("Leaderboard Updated"),console.log(i)})),t.$$set=t=>{"socket"in t&&n(0,c=t.socket),"roomCode"in t&&n(12,p=t.roomCode)},[c,l,h,u,o,r,i,d,a,function({detail:t}){n(1,l=!0),n(12,p=t.room),s("roomCodeChange",t),n(4,o=t.host),console.log(t)},function({detail:t}){t.numberOfRounds>a.length&&(t.numberOfRounds=a.length);let e=function(t){let e=[];for(;e.length!=t;){let t=(n=a.length,Math.floor(Math.random()*n));e.includes(t)||e.push(t)}var n;return e}(t.numberOfRounds);t.films=e,console.log(t),c.emit("host-start",t)},function({detail:t}){c.emit("user-round",t),n(3,u=!0)},p]}class Se extends gt{constructor(t){super(),mt(this,t,Ae,Re,i,{socket:0,roomCode:12})}}const Be=Object.create(null);Be.open="0",Be.close="1",Be.ping="2",Be.pong="3",Be.message="4",Be.upgrade="5",Be.noop="6";const De=Object.create(null);Object.keys(Be).forEach((t=>{De[Be[t]]=t}));const Le={type:"error",data:"parser error"},Pe="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),Ie="function"==typeof ArrayBuffer,Fe=({type:t,data:e},n,s)=>{return Pe&&e instanceof Blob?n?s(e):qe(e,s):Ie&&(e instanceof ArrayBuffer||(o=e,"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(o):o&&o.buffer instanceof ArrayBuffer))?n?s(e):qe(new Blob([e]),s):s(Be[t]+(e||""));var o},qe=(t,e)=>{const n=new FileReader;return n.onload=function(){const t=n.result.split(",")[1];e("b"+t)},n.readAsDataURL(t)};for(var ze="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ye="undefined"==typeof Uint8Array?[]:new Uint8Array(256),Ve=0;Ve<ze.length;Ve++)Ye[ze.charCodeAt(Ve)]=Ve;const We="function"==typeof ArrayBuffer,Ge=(t,e)=>{if("string"!=typeof t)return{type:"message",data:He(t,e)};const n=t.charAt(0);if("b"===n)return{type:"message",data:Ue(t.substring(1),e)};return De[n]?t.length>1?{type:De[n],data:t.substring(1)}:{type:De[n]}:Le},Ue=(t,e)=>{if(We){const n=function(t){var e,n,s,o,r,i=.75*t.length,c=t.length,a=0;"="===t[t.length-1]&&(i--,"="===t[t.length-2]&&i--);var l=new ArrayBuffer(i),h=new Uint8Array(l);for(e=0;e<c;e+=4)n=Ye[t.charCodeAt(e)],s=Ye[t.charCodeAt(e+1)],o=Ye[t.charCodeAt(e+2)],r=Ye[t.charCodeAt(e+3)],h[a++]=n<<2|s>>4,h[a++]=(15&s)<<4|o>>2,h[a++]=(3&o)<<6|63&r;return l}(t);return He(n,e)}return{base64:!0,data:t}},He=(t,e)=>"blob"===e&&t instanceof ArrayBuffer?new Blob([t]):t,Je=String.fromCharCode(30);function Xe(t){if(t)return function(t){for(var e in Xe.prototype)t[e]=Xe.prototype[e];return t}(t)}Xe.prototype.on=Xe.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},Xe.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this},Xe.prototype.off=Xe.prototype.removeListener=Xe.prototype.removeAllListeners=Xe.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,s=this._callbacks["$"+t];if(!s)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var o=0;o<s.length;o++)if((n=s[o])===e||n.fn===e){s.splice(o,1);break}return 0===s.length&&delete this._callbacks["$"+t],this},Xe.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],s=1;s<arguments.length;s++)e[s-1]=arguments[s];if(n){s=0;for(var o=(n=n.slice(0)).length;s<o;++s)n[s].apply(this,e)}return this},Xe.prototype.emitReserved=Xe.prototype.emit,Xe.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},Xe.prototype.hasListeners=function(t){return!!this.listeners(t).length};var Ze="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")();function Ke(t,...e){return e.reduce(((e,n)=>(t.hasOwnProperty(n)&&(e[n]=t[n]),e)),{})}const Qe=setTimeout,tn=clearTimeout;function en(t,e){e.useNativeTimers?(t.setTimeoutFn=Qe.bind(Ze),t.clearTimeoutFn=tn.bind(Ze)):(t.setTimeoutFn=setTimeout.bind(Ze),t.clearTimeoutFn=clearTimeout.bind(Ze))}class nn extends Error{constructor(t,e,n){super(t),this.description=e,this.context=n,this.type="TransportError"}}class sn extends Xe{constructor(t){super(),this.writable=!1,en(this,t),this.opts=t,this.query=t.query,this.readyState="",this.socket=t.socket}onError(t,e,n){return super.emitReserved("error",new nn(t,e,n)),this}open(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this}close(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}send(t){"open"===this.readyState&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const e=Ge(t,this.socket.binaryType);this.onPacket(e)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}}const on="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),rn={};let cn,an=0,ln=0;function hn(t){let e="";do{e=on[t%64]+e,t=Math.floor(t/64)}while(t>0);return e}function un(){const t=hn(+new Date);return t!==cn?(an=0,cn=t):t+"."+hn(an++)}for(;ln<64;ln++)rn[on[ln]]=ln;function pn(t){let e="";for(let n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e}let dn=!1;try{dn="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(t){}const fn=dn;function mn(t){const e=t.xdomain;try{if("undefined"!=typeof XMLHttpRequest&&(!e||fn))return new XMLHttpRequest}catch(t){}if(!e)try{return new(Ze[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(t){}}function gn(){}const yn=null!=new mn({xdomain:!1}).responseType;class bn extends Xe{constructor(t,e){super(),en(this,e),this.opts=e,this.method=e.method||"GET",this.uri=t,this.async=!1!==e.async,this.data=void 0!==e.data?e.data:null,this.create()}create(){const t=Ke(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this.opts.xd,t.xscheme=!!this.opts.xs;const e=this.xhr=new mn(t);try{e.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders){e.setDisableHeaderCheck&&e.setDisableHeaderCheck(!0);for(let t in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(t)&&e.setRequestHeader(t,this.opts.extraHeaders[t])}}catch(t){}if("POST"===this.method)try{e.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(t){}try{e.setRequestHeader("Accept","*/*")}catch(t){}"withCredentials"in e&&(e.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(e.timeout=this.opts.requestTimeout),e.onreadystatechange=()=>{4===e.readyState&&(200===e.status||1223===e.status?this.onLoad():this.setTimeoutFn((()=>{this.onError("number"==typeof e.status?e.status:0)}),0))},e.send(this.data)}catch(t){return void this.setTimeoutFn((()=>{this.onError(t)}),0)}"undefined"!=typeof document&&(this.index=bn.requestsCount++,bn.requests[this.index]=this)}onError(t){this.emitReserved("error",t,this.xhr),this.cleanup(!0)}cleanup(t){if(void 0!==this.xhr&&null!==this.xhr){if(this.xhr.onreadystatechange=gn,t)try{this.xhr.abort()}catch(t){}"undefined"!=typeof document&&delete bn.requests[this.index],this.xhr=null}}onLoad(){const t=this.xhr.responseText;null!==t&&(this.emitReserved("data",t),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}}if(bn.requestsCount=0,bn.requests={},"undefined"!=typeof document)if("function"==typeof attachEvent)attachEvent("onunload",vn);else if("function"==typeof addEventListener){addEventListener("onpagehide"in Ze?"pagehide":"unload",vn,!1)}function vn(){for(let t in bn.requests)bn.requests.hasOwnProperty(t)&&bn.requests[t].abort()}const wn="function"==typeof Promise&&"function"==typeof Promise.resolve?t=>Promise.resolve().then(t):(t,e)=>e(t,0),$n=Ze.WebSocket||Ze.MozWebSocket,kn="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();class _n extends sn{constructor(t){super(t),this.supportsBinary=!t.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const t=this.uri(),e=this.opts.protocols,n=kn?{}:Ke(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=kn?new $n(t,e,n):e?new $n(t,e):new $n(t)}catch(t){return this.emitReserved("error",t)}this.ws.binaryType=this.socket.binaryType||"arraybuffer",this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let e=0;e<t.length;e++){const n=t[e],s=e===t.length-1;Fe(n,this.supportsBinary,(t=>{try{this.ws.send(t)}catch(t){}s&&wn((()=>{this.writable=!0,this.emitReserved("drain")}),this.setTimeoutFn)}))}}doClose(){void 0!==this.ws&&(this.ws.close(),this.ws=null)}uri(){let t=this.query||{};const e=this.opts.secure?"wss":"ws";let n="";this.opts.port&&("wss"===e&&443!==Number(this.opts.port)||"ws"===e&&80!==Number(this.opts.port))&&(n=":"+this.opts.port),this.opts.timestampRequests&&(t[this.opts.timestampParam]=un()),this.supportsBinary||(t.b64=1);const s=pn(t);return e+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+(s.length?"?"+s:"")}check(){return!(!$n||"__initialize"in $n&&this.name===_n.prototype.name)}}const xn={websocket:_n,polling:class extends sn{constructor(t){if(super(t),this.polling=!1,"undefined"!=typeof location){const e="https:"===location.protocol;let n=location.port;n||(n=e?"443":"80"),this.xd="undefined"!=typeof location&&t.hostname!==location.hostname||n!==t.port,this.xs=t.secure!==e}const e=t&&t.forceBase64;this.supportsBinary=yn&&!e}get name(){return"polling"}doOpen(){this.poll()}pause(t){this.readyState="pausing";const e=()=>{this.readyState="paused",t()};if(this.polling||!this.writable){let t=0;this.polling&&(t++,this.once("pollComplete",(function(){--t||e()}))),this.writable||(t++,this.once("drain",(function(){--t||e()})))}else e()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){((t,e)=>{const n=t.split(Je),s=[];for(let t=0;t<n.length;t++){const o=Ge(n[t],e);if(s.push(o),"error"===o.type)break}return s})(t,this.socket.binaryType).forEach((t=>{if("opening"===this.readyState&&"open"===t.type&&this.onOpen(),"close"===t.type)return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(t)})),"closed"!==this.readyState&&(this.polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this.poll())}doClose(){const t=()=>{this.write([{type:"close"}])};"open"===this.readyState?t():this.once("open",t)}write(t){this.writable=!1,((t,e)=>{const n=t.length,s=new Array(n);let o=0;t.forEach(((t,r)=>{Fe(t,!1,(t=>{s[r]=t,++o===n&&e(s.join(Je))}))}))})(t,(t=>{this.doWrite(t,(()=>{this.writable=!0,this.emitReserved("drain")}))}))}uri(){let t=this.query||{};const e=this.opts.secure?"https":"http";let n="";!1!==this.opts.timestampRequests&&(t[this.opts.timestampParam]=un()),this.supportsBinary||t.sid||(t.b64=1),this.opts.port&&("https"===e&&443!==Number(this.opts.port)||"http"===e&&80!==Number(this.opts.port))&&(n=":"+this.opts.port);const s=pn(t);return e+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+(s.length?"?"+s:"")}request(t={}){return Object.assign(t,{xd:this.xd,xs:this.xs},this.opts),new bn(this.uri(),t)}doWrite(t,e){const n=this.request({method:"POST",data:t});n.on("success",e),n.on("error",((t,e)=>{this.onError("xhr post error",t,e)}))}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",((t,e)=>{this.onError("xhr poll error",t,e)})),this.pollXhr=t}}},Tn=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,En=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function jn(t){const e=t,n=t.indexOf("["),s=t.indexOf("]");-1!=n&&-1!=s&&(t=t.substring(0,n)+t.substring(n,s).replace(/:/g,";")+t.substring(s,t.length));let o=Tn.exec(t||""),r={},i=14;for(;i--;)r[En[i]]=o[i]||"";return-1!=n&&-1!=s&&(r.source=e,r.host=r.host.substring(1,r.host.length-1).replace(/;/g,":"),r.authority=r.authority.replace("[","").replace("]","").replace(/;/g,":"),r.ipv6uri=!0),r.pathNames=function(t,e){const n=/\/{2,9}/g,s=e.replace(n,"/").split("/");"/"!=e.substr(0,1)&&0!==e.length||s.splice(0,1);"/"==e.substr(e.length-1,1)&&s.splice(s.length-1,1);return s}(0,r.path),r.queryKey=function(t,e){const n={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(t,e,s){e&&(n[e]=s)})),n}(0,r.query),r}class Cn extends Xe{constructor(t,e={}){super(),t&&"object"==typeof t&&(e=t,t=null),t?(t=jn(t),e.hostname=t.host,e.secure="https"===t.protocol||"wss"===t.protocol,e.port=t.port,t.query&&(e.query=t.query)):e.host&&(e.hostname=jn(e.host).host),en(this,e),this.secure=null!=e.secure?e.secure:"undefined"!=typeof location&&"https:"===location.protocol,e.hostname&&!e.port&&(e.port=this.secure?"443":"80"),this.hostname=e.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=e.port||("undefined"!=typeof location&&location.port?location.port:this.secure?"443":"80"),this.transports=e.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},e),this.opts.path=this.opts.path.replace(/\/$/,"")+"/","string"==typeof this.opts.query&&(this.opts.query=function(t){let e={},n=t.split("&");for(let t=0,s=n.length;t<s;t++){let s=n[t].split("=");e[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return e}(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,"function"==typeof addEventListener&&(this.opts.closeOnBeforeunload&&addEventListener("beforeunload",(()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())}),!1),"localhost"!==this.hostname&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(t){const e=Object.assign({},this.opts.query);e.EIO=4,e.transport=t,this.id&&(e.sid=this.id);const n=Object.assign({},this.opts.transportOptions[t],this.opts,{query:e,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return new xn[t](n)}open(){let t;if(this.opts.rememberUpgrade&&Cn.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))t="websocket";else{if(0===this.transports.length)return void this.setTimeoutFn((()=>{this.emitReserved("error","No transports available")}),0);t=this.transports[0]}this.readyState="opening";try{t=this.createTransport(t)}catch(t){return this.transports.shift(),void this.open()}t.open(),this.setTransport(t)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",(t=>this.onClose("transport close",t)))}probe(t){let e=this.createTransport(t),n=!1;Cn.priorWebsocketSuccess=!1;const s=()=>{n||(e.send([{type:"ping",data:"probe"}]),e.once("packet",(t=>{if(!n)if("pong"===t.type&&"probe"===t.data){if(this.upgrading=!0,this.emitReserved("upgrading",e),!e)return;Cn.priorWebsocketSuccess="websocket"===e.name,this.transport.pause((()=>{n||"closed"!==this.readyState&&(l(),this.setTransport(e),e.send([{type:"upgrade"}]),this.emitReserved("upgrade",e),e=null,this.upgrading=!1,this.flush())}))}else{const t=new Error("probe error");t.transport=e.name,this.emitReserved("upgradeError",t)}})))};function o(){n||(n=!0,l(),e.close(),e=null)}const r=t=>{const n=new Error("probe error: "+t);n.transport=e.name,o(),this.emitReserved("upgradeError",n)};function i(){r("transport closed")}function c(){r("socket closed")}function a(t){e&&t.name!==e.name&&o()}const l=()=>{e.removeListener("open",s),e.removeListener("error",r),e.removeListener("close",i),this.off("close",c),this.off("upgrading",a)};e.once("open",s),e.once("error",r),e.once("close",i),this.once("close",c),this.once("upgrading",a),e.open()}onOpen(){if(this.readyState="open",Cn.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade&&this.transport.pause){let t=0;const e=this.upgrades.length;for(;t<e;t++)this.probe(this.upgrades[t])}}onPacket(t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const e=new Error("server error");e.code=t.data,this.onError(e);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data)}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.maxPayload=t.maxPayload,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn((()=>{this.onClose("ping timeout")}),this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this.getWritablePackets();this.transport.send(t),this.prevBufferLen=t.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;let t=1;for(let n=0;n<this.writeBuffer.length;n++){const s=this.writeBuffer[n].data;if(s&&(t+="string"==typeof(e=s)?function(t){let e=0,n=0;for(let s=0,o=t.length;s<o;s++)e=t.charCodeAt(s),e<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(s++,n+=4);return n}(e):Math.ceil(1.33*(e.byteLength||e.size))),n>0&&t>this.maxPayload)return this.writeBuffer.slice(0,n);t+=2}var e;return this.writeBuffer}write(t,e,n){return this.sendPacket("message",t,e,n),this}send(t,e,n){return this.sendPacket("message",t,e,n),this}sendPacket(t,e,n,s){if("function"==typeof e&&(s=e,e=void 0),"function"==typeof n&&(s=n,n=null),"closing"===this.readyState||"closed"===this.readyState)return;(n=n||{}).compress=!1!==n.compress;const o={type:t,data:e,options:n};this.emitReserved("packetCreate",o),this.writeBuffer.push(o),s&&this.once("flush",s),this.flush()}close(){const t=()=>{this.onClose("forced close"),this.transport.close()},e=()=>{this.off("upgrade",e),this.off("upgradeError",e),t()},n=()=>{this.once("upgrade",e),this.once("upgradeError",e)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",(()=>{this.upgrading?n():t()})):this.upgrading?n():t()),this}onError(t){Cn.priorWebsocketSuccess=!1,this.emitReserved("error",t),this.onClose("transport error",t)}onClose(t,e){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),"function"==typeof removeEventListener&&removeEventListener("offline",this.offlineEventListener,!1),this.readyState="closed",this.id=null,this.emitReserved("close",t,e),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(t){const e=[];let n=0;const s=t.length;for(;n<s;n++)~this.transports.indexOf(t[n])&&e.push(t[n]);return e}}Cn.protocol=4;const Mn="function"==typeof ArrayBuffer,On=Object.prototype.toString,Nn="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===On.call(Blob),Rn="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===On.call(File);function An(t){return Mn&&(t instanceof ArrayBuffer||(t=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer)(t))||Nn&&t instanceof Blob||Rn&&t instanceof File}function Sn(t,e){if(!t||"object"!=typeof t)return!1;if(Array.isArray(t)){for(let e=0,n=t.length;e<n;e++)if(Sn(t[e]))return!0;return!1}if(An(t))return!0;if(t.toJSON&&"function"==typeof t.toJSON&&1===arguments.length)return Sn(t.toJSON(),!0);for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e)&&Sn(t[e]))return!0;return!1}function Bn(t){const e=[],n=t.data,s=t;return s.data=Dn(n,e),s.attachments=e.length,{packet:s,buffers:e}}function Dn(t,e){if(!t)return t;if(An(t)){const n={_placeholder:!0,num:e.length};return e.push(t),n}if(Array.isArray(t)){const n=new Array(t.length);for(let s=0;s<t.length;s++)n[s]=Dn(t[s],e);return n}if("object"==typeof t&&!(t instanceof Date)){const n={};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=Dn(t[s],e));return n}return t}function Ln(t,e){return t.data=Pn(t.data,e),t.attachments=void 0,t}function Pn(t,e){if(!t)return t;if(t&&t._placeholder)return e[t.num];if(Array.isArray(t))for(let n=0;n<t.length;n++)t[n]=Pn(t[n],e);else if("object"==typeof t)for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(t[n]=Pn(t[n],e));return t}var In;!function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"}(In||(In={}));class Fn extends Xe{constructor(t){super(),this.reviver=t}add(t){let e;if("string"==typeof t)e=this.decodeString(t),e.type===In.BINARY_EVENT||e.type===In.BINARY_ACK?(this.reconstructor=new qn(e),0===e.attachments&&super.emitReserved("decoded",e)):super.emitReserved("decoded",e);else{if(!An(t)&&!t.base64)throw new Error("Unknown type: "+t);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");e=this.reconstructor.takeBinaryData(t),e&&(this.reconstructor=null,super.emitReserved("decoded",e))}}decodeString(t){let e=0;const n={type:Number(t.charAt(0))};if(void 0===In[n.type])throw new Error("unknown packet type "+n.type);if(n.type===In.BINARY_EVENT||n.type===In.BINARY_ACK){const s=e+1;for(;"-"!==t.charAt(++e)&&e!=t.length;);const o=t.substring(s,e);if(o!=Number(o)||"-"!==t.charAt(e))throw new Error("Illegal attachments");n.attachments=Number(o)}if("/"===t.charAt(e+1)){const s=e+1;for(;++e;){if(","===t.charAt(e))break;if(e===t.length)break}n.nsp=t.substring(s,e)}else n.nsp="/";const s=t.charAt(e+1);if(""!==s&&Number(s)==s){const s=e+1;for(;++e;){const n=t.charAt(e);if(null==n||Number(n)!=n){--e;break}if(e===t.length)break}n.id=Number(t.substring(s,e+1))}if(t.charAt(++e)){const s=this.tryParse(t.substr(e));if(!Fn.isPayloadValid(n.type,s))throw new Error("invalid payload");n.data=s}return n}tryParse(t){try{return JSON.parse(t,this.reviver)}catch(t){return!1}}static isPayloadValid(t,e){switch(t){case In.CONNECT:return"object"==typeof e;case In.DISCONNECT:return void 0===e;case In.CONNECT_ERROR:return"string"==typeof e||"object"==typeof e;case In.EVENT:case In.BINARY_EVENT:return Array.isArray(e)&&e.length>0;case In.ACK:case In.BINARY_ACK:return Array.isArray(e)}}destroy(){this.reconstructor&&this.reconstructor.finishedReconstruction()}}class qn{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const t=Ln(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}var zn=Object.freeze({__proto__:null,protocol:5,get PacketType(){return In},Encoder:class{constructor(t){this.replacer=t}encode(t){return t.type!==In.EVENT&&t.type!==In.ACK||!Sn(t)?[this.encodeAsString(t)]:(t.type=t.type===In.EVENT?In.BINARY_EVENT:In.BINARY_ACK,this.encodeAsBinary(t))}encodeAsString(t){let e=""+t.type;return t.type!==In.BINARY_EVENT&&t.type!==In.BINARY_ACK||(e+=t.attachments+"-"),t.nsp&&"/"!==t.nsp&&(e+=t.nsp+","),null!=t.id&&(e+=t.id),null!=t.data&&(e+=JSON.stringify(t.data,this.replacer)),e}encodeAsBinary(t){const e=Bn(t),n=this.encodeAsString(e.packet),s=e.buffers;return s.unshift(n),s}},Decoder:Fn});function Yn(t,e,n){return t.on(e,n),function(){t.off(e,n)}}const Vn=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Wn extends Xe{constructor(t,e,n){super(),this.connected=!1,this.receiveBuffer=[],this.sendBuffer=[],this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=e,n&&n.auth&&(this.auth=n.auth),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[Yn(t,"open",this.onopen.bind(this)),Yn(t,"packet",this.onpacket.bind(this)),Yn(t,"error",this.onerror.bind(this)),Yn(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...e){if(Vn.hasOwnProperty(t))throw new Error('"'+t+'" is a reserved event name');e.unshift(t);const n={type:In.EVENT,data:e,options:{}};if(n.options.compress=!1!==this.flags.compress,"function"==typeof e[e.length-1]){const t=this.ids++,s=e.pop();this._registerAckCallback(t,s),n.id=t}const s=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!s||!this.connected)||(this.connected?(this.notifyOutgoingListeners(n),this.packet(n)):this.sendBuffer.push(n)),this.flags={},this}_registerAckCallback(t,e){const n=this.flags.timeout;if(void 0===n)return void(this.acks[t]=e);const s=this.io.setTimeoutFn((()=>{delete this.acks[t];for(let e=0;e<this.sendBuffer.length;e++)this.sendBuffer[e].id===t&&this.sendBuffer.splice(e,1);e.call(this,new Error("operation has timed out"))}),n);this.acks[t]=(...t)=>{this.io.clearTimeoutFn(s),e.apply(this,[null,...t])}}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){"function"==typeof this.auth?this.auth((t=>{this.packet({type:In.CONNECT,data:t})})):this.packet({type:In.CONNECT,data:this.auth})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,e){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,e)}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case In.CONNECT:if(t.data&&t.data.sid){const e=t.data.sid;this.onconnect(e)}else this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case In.EVENT:case In.BINARY_EVENT:this.onevent(t);break;case In.ACK:case In.BINARY_ACK:this.onack(t);break;case In.DISCONNECT:this.ondisconnect();break;case In.CONNECT_ERROR:this.destroy();const e=new Error(t.data.message);e.data=t.data.data,this.emitReserved("connect_error",e)}}onevent(t){const e=t.data||[];null!=t.id&&e.push(this.ack(t.id)),this.connected?this.emitEvent(e):this.receiveBuffer.push(Object.freeze(e))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const e=this._anyListeners.slice();for(const n of e)n.apply(this,t)}super.emit.apply(this,t)}ack(t){const e=this;let n=!1;return function(...s){n||(n=!0,e.packet({type:In.ACK,id:t,data:s}))}}onack(t){const e=this.acks[t.id];"function"==typeof e&&(e.apply(this,t.data),delete this.acks[t.id])}onconnect(t){this.id=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach((t=>this.emitEvent(t))),this.receiveBuffer=[],this.sendBuffer.forEach((t=>{this.notifyOutgoingListeners(t),this.packet(t)})),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach((t=>t())),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:In.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const e=this._anyListeners;for(let n=0;n<e.length;n++)if(t===e[n])return e.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const e=this._anyOutgoingListeners;for(let n=0;n<e.length;n++)if(t===e[n])return e.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const e=this._anyOutgoingListeners.slice();for(const n of e)n.apply(this,t.data)}}}function Gn(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}Gn.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=0==(1&Math.floor(10*e))?t-n:t+n}return 0|Math.min(t,this.max)},Gn.prototype.reset=function(){this.attempts=0},Gn.prototype.setMin=function(t){this.ms=t},Gn.prototype.setMax=function(t){this.max=t},Gn.prototype.setJitter=function(t){this.jitter=t};class Un extends Xe{constructor(t,e){var n;super(),this.nsps={},this.subs=[],t&&"object"==typeof t&&(e=t,t=void 0),(e=e||{}).path=e.path||"/socket.io",this.opts=e,en(this,e),this.reconnection(!1!==e.reconnection),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor(null!==(n=e.randomizationFactor)&&void 0!==n?n:.5),this.backoff=new Gn({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==e.timeout?2e4:e.timeout),this._readyState="closed",this.uri=t;const s=e.parser||zn;this.encoder=new s.Encoder,this.decoder=new s.Decoder,this._autoConnect=!1!==e.autoConnect,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection}reconnectionAttempts(t){return void 0===t?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var e;return void 0===t?this._reconnectionDelay:(this._reconnectionDelay=t,null===(e=this.backoff)||void 0===e||e.setMin(t),this)}randomizationFactor(t){var e;return void 0===t?this._randomizationFactor:(this._randomizationFactor=t,null===(e=this.backoff)||void 0===e||e.setJitter(t),this)}reconnectionDelayMax(t){var e;return void 0===t?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,null===(e=this.backoff)||void 0===e||e.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new Cn(this.uri,this.opts);const e=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const s=Yn(e,"open",(function(){n.onopen(),t&&t()})),o=Yn(e,"error",(e=>{n.cleanup(),n._readyState="closed",this.emitReserved("error",e),t?t(e):n.maybeReconnectOnOpen()}));if(!1!==this._timeout){const t=this._timeout;0===t&&s();const n=this.setTimeoutFn((()=>{s(),e.close(),e.emit("error",new Error("timeout"))}),t);this.opts.autoUnref&&n.unref(),this.subs.push((function(){clearTimeout(n)}))}return this.subs.push(s),this.subs.push(o),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(Yn(t,"ping",this.onping.bind(this)),Yn(t,"data",this.ondata.bind(this)),Yn(t,"error",this.onerror.bind(this)),Yn(t,"close",this.onclose.bind(this)),Yn(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){this.decoder.add(t)}ondecoded(t){this.emitReserved("packet",t)}onerror(t){this.emitReserved("error",t)}socket(t,e){let n=this.nsps[t];return n||(n=new Wn(this,t,e),this.nsps[t]=n),n}_destroy(t){const e=Object.keys(this.nsps);for(const t of e){if(this.nsps[t].active)return}this._close()}_packet(t){const e=this.encoder.encode(t);for(let n=0;n<e.length;n++)this.engine.write(e[n],t.options)}cleanup(){this.subs.forEach((t=>t())),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(t,e){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,e),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const e=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn((()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),t.skipReconnect||t.open((e=>{e?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",e)):t.onreconnect()})))}),e);this.opts.autoUnref&&n.unref(),this.subs.push((function(){clearTimeout(n)}))}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const Hn={};function Jn(t,e){"object"==typeof t&&(e=t,t=void 0);const n=function(t,e="",n){let s=t;n=n||"undefined"!=typeof location&&location,null==t&&(t=n.protocol+"//"+n.host),"string"==typeof t&&("/"===t.charAt(0)&&(t="/"===t.charAt(1)?n.protocol+t:n.host+t),/^(https?|wss?):\/\//.test(t)||(t=void 0!==n?n.protocol+"//"+t:"https://"+t),s=jn(t)),s.port||(/^(http|ws)$/.test(s.protocol)?s.port="80":/^(http|ws)s$/.test(s.protocol)&&(s.port="443")),s.path=s.path||"/";const o=-1!==s.host.indexOf(":")?"["+s.host+"]":s.host;return s.id=s.protocol+"://"+o+":"+s.port+e,s.href=s.protocol+"://"+o+(n&&n.port===s.port?"":":"+s.port),s}(t,(e=e||{}).path||"/socket.io"),s=n.source,o=n.id,r=n.path,i=Hn[o]&&r in Hn[o].nsps;let c;return e.forceNew||e["force new connection"]||!1===e.multiplex||i?c=new Un(s,e):(Hn[o]||(Hn[o]=new Un(s,e)),c=Hn[o]),n.query&&!e.query&&(e.query=n.queryKey),c.socket(n.path,e)}function Xn(e){let n,s;return n=new Ot({props:{msg:e[8]}}),{c(){ut(n.$$.fragment)},m(t,e){pt(n,t,e),s=!0},p:t,i(t){s||(it(n.$$.fragment,t),s=!0)},o(t){ct(n.$$.fragment,t),s=!1},d(t){dt(n,t)}}}function Zn(t){let e,n,s;function o(e){t[5](e)}let r={socket:t[2]};return void 0!==t[1]&&(r.roomCode=t[1]),e=new Se({props:r}),Y.push((()=>function(t,e,n){const s=t.$$.props[e];void 0!==s&&(t.$$.bound[s]=n,n(t.$$.ctx[s]))}(e,"roomCode",o))),e.$on("roomCodeChange",t[4]),{c(){ut(e.$$.fragment)},m(t,n){pt(e,t,n),s=!0},p(t,s){const o={};var r;!n&&2&s&&(n=!0,o.roomCode=t[1],r=()=>n=!1,W.push(r)),e.$set(o)},i(t){s||(it(e.$$.fragment,t),s=!0)},o(t){ct(e.$$.fragment,t),s=!1},d(t){dt(e,t)}}}function Kn(e){let n;return{c(){n=_("p"),n.textContent="Waiting!"},m(t,e){w(t,n,e)},p:t,i:t,o:t,d(t){t&&$(n)}}}function Qn(t){let e,n,s,o;n=new wt({props:{host:t[0],roomCode:t[1]}});let r={ctx:t,current:null,token:null,hasCatch:!0,pending:Kn,then:Zn,catch:Xn,value:7,error:8,blocks:[,,,]};return function(t,e){const n=e.token={};function s(t,s,o,r){if(e.token!==n)return;e.resolved=r;let i=e.ctx;void 0!==o&&(i=i.slice(),i[o]=r);const c=t&&(e.current=t)(i);let a=!1;e.block&&(e.blocks?e.blocks.forEach(((t,n)=>{n!==s&&t&&(ot(),ct(t,1,1,(()=>{e.blocks[n]===t&&(e.blocks[n]=null)})),rt())})):e.block.d(1),c.c(),it(c,1),c.m(e.mount(),e.anchor),a=!0),e.block=c,e.blocks&&(e.blocks[s]=c),a&&K()}if(function(t){return t&&"object"==typeof t&&"function"==typeof t.then}(t)){const n=F();if(t.then((t=>{I(n),s(e.then,1,e.value,t),I(null)}),(t=>{if(I(n),s(e.catch,2,e.error,t),I(null),!e.hasCatch)throw t})),e.current!==e.pending)s(e.pending,0)}else{if(e.current!==e.then)return s(e.then,1,e.value,t),!0;e.resolved=t}}(t[3],r),{c(){e=_("main"),ut(n.$$.fragment),s=E(),r.block.c(),M(e,"class","svelte-gcdlys")},m(t,i){w(t,e,i),pt(n,e,null),y(e,s),r.block.m(e,r.anchor=null),r.mount=()=>e,r.anchor=null,o=!0},p(e,[s]){t=e;const o={};1&s&&(o.host=t[0]),2&s&&(o.roomCode=t[1]),n.$set(o),function(t,e,n){const s=e.slice(),{resolved:o}=t;t.current===t.then&&(s[t.value]=o),t.current===t.catch&&(s[t.error]=o),t.block.p(s,n)}(r,t,s)},i(t){o||(it(n.$$.fragment,t),it(r.block),o=!0)},o(t){ct(n.$$.fragment,t);for(let t=0;t<3;t+=1){ct(r.blocks[t])}o=!1},d(t){t&&$(e),dt(n),r.block.d(),r.token=null,r=null}}}function ts(t,e,n){const s=Jn("ws://localhost:500");let o,r,i=async function(){await new Promise(((t,e)=>{s.on("connect",(e=>{t(e),console.log("Connected to Socket.io!")})),s.on("connect_error",(t=>{e("Error connecting to server!")}))}))}();return[o,r,s,i,function({detail:t}){n(0,o=t.host),console.log(t),n(1,r=t.room)},function(t){r=t,n(1,r)}]}Object.assign(Jn,{Manager:Un,Socket:Wn,io:Jn,connect:Jn});return new class extends gt{constructor(t){super(),mt(this,t,ts,Qn,i,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
